name: Mantener Backend Activo (Render)

on:
  schedule:
    - cron: "*/10 * * * *"
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping al backend
        run: |
          echo "Ping al backend de Costeo DCM..."
          STATUS=$(curl -o /dev/null -s -w "%{http_code}" https://costosdcm-backend.onrender.com/)
          echo "Status HTTP: $STATUS"

          if [ "$STATUS" -ne 200 ]; then
            echo "❌ Backend caído o sin responder"
            exit 1
          else
            echo "✅ Backend activo"
          fi
